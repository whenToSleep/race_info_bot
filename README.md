–°—Ç–µ–∫: Python + aiogram 3.x + asyncio + aiohttp + logging + pytest (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ)

–û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ 



1 –≥–æ–Ω–∫–∞

12 –∫—Ä—É–≥–æ–≤

1 –∫—Ä—É–≥ = 20 —Å–µ–∫—É–Ω–¥

—Å—Ç–∞—Ä—Ç –∑–∞–¥–∞—ë—Ç—Å—è –≤—Ä—É—á–Ω—É—é

–±–æ—Ç:

–≤—ã—á–∏—Å–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –∫—Ä—É–≥ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

–ø—É–±–ª–∏–∫—É–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∫—Ä—É–≥

–ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å

–ª–æ–≥–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –∫—Ä—É–≥ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

üó∫Ô∏è –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–æ –∏—Ç–µ—Ä–∞—Ü–∏—è–º

–ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è:

–∏–º–µ–µ—Ç —Ü–µ–ª—å

—Ä–µ–∑—É–ª—å—Ç–∞—Ç

—á–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–∫—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 0 ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–∞—Ä–∫–∞—Å
–¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –±–æ—Ç –±–µ–∑ –ª–æ–≥–∏–∫–∏ –≥–æ–Ω–∫–∏.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

–°–æ–∑–¥–∞—ë–º –ø—Ä–æ–µ–∫—Ç

–ü–æ–¥–∫–ª—é—á–∞–µ–º aiogram

–ë–æ—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç

–õ–æ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä—É—á–Ω–æ–µ)

–ë–æ—Ç —Å—Ç–∞—Ä—Ç—É–µ—Ç

–ë–æ—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç

–ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–ë–æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –∂–∏–≤—ë—Ç

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 1 ‚Äî –ú–æ–¥–µ–ª—å –≥–æ–Ω–∫–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏
–¶–µ–ª—å

–ù–∞—É—á–∏—Ç—å –±–æ—Ç–∞ –ø–æ–Ω–∏–º–∞—Ç—å —Ç–µ–∫—É—â–∏–π –∫—Ä—É–≥ –ø–æ –≤—Ä–µ–º–µ–Ω–∏.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

–ö–æ–Ω—Ñ–∏–≥:

race_start_time

lap_duration = 20

total_laps = 12

–§—É–Ω–∫—Ü–∏—è:

—Å—á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∫—Ä—É–≥

–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –ª–æ–≥ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–µ–Ω—è–µ–º race_start_time

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫—Ä—É–≥ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–ö—Ä—É–≥ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

–ó–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –≥–æ–Ω–∫–∏ –±–æ—Ç —ç—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 2 ‚Äî –†–∞–±–æ—Ç–∞ —Å API (–º–æ–∫–∏)
–¶–µ–ª—å

–ü–æ–¥–∫–ª—é—á–∏—Ç—å API, –ø–æ–∫–∞ —á–µ—Ä–µ–∑ –º–æ–∫-–¥–∞–Ω–Ω—ã–µ.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

api_client

–ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π JSON

–ü–∞—Ä—Å–∏–º –¥–∞–Ω–Ω—ã–µ

–ü—Ä–æ–≤–µ—Ä—è–µ–º start_position

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–µ–Ω—è–µ–º JSON

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–ë–æ—Ç –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 3 ‚Äî –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
–¶–µ–ª—å

–í—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ä—Ç–æ–≤—É—é –ª–∏–¥–µ—Ä–±–æ—Ä–¥—É –≤ —á–∞—Ç.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

–§–æ—Ä–º–∏—Ä—É–µ–º leaderboard –ø–æ start_position

–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –≥–æ–Ω–∫–∏

–ó–∞–ø–æ–º–∏–Ω–∞–µ–º, —á—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ –¥–æ —Å—Ç–∞—Ä—Ç–∞

–ó–∞–ø—É—Å–∫ –≤–æ –≤—Ä–µ–º—è –≥–æ–Ω–∫–∏

–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –æ–¥–∏–Ω —Ä–∞–∑

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

–ü–æ—Ä—è–¥–æ–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 4 ‚Äî –õ–∏–¥–µ—Ä–±–æ—Ä–¥–∞ –ø–æ –∫—Ä—É–≥–∞–º
–¶–µ–ª—å

–ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥—ã–π –∫—Ä—É–≥.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

–ö–∞–∂–¥—ã–µ 20 —Å–µ–∫:

–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ

–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –∫—Ä—É–≥

–ï—Å–ª–∏ –∫—Ä—É–≥ –Ω–æ–≤—ã–π:

—Ñ–æ—Ä–º–∏—Ä—É–µ–º leaderboard

–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ

–•—Ä–∞–Ω–∏–º –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∫—Ä—É–≥–∏

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É

–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø–æ–ø—ã—Ç–∫—É

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥—É–±–ª–µ–π –Ω–µ—Ç

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–†–æ–≤–Ω–æ 12 —Å–æ–æ–±—â–µ–Ω–∏–π

–¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∫—Ä—É–≥–∏

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 5 ‚Äî –§–∏–Ω–∞–ª—å–Ω–∞—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
–¶–µ–ª—å

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –≥–æ–Ω–∫—É.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

–û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏–µ –≥–æ–Ω–∫–∏

–í—ã–≤–æ–¥–∏–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ª–∏–¥–µ—Ä–±–æ—Ä–¥—É

–û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∏–Ω–∞–ª –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

–ü–æ—Å–ª–µ —Ñ–∏–Ω–∞–ª–∞ –±–æ—Ç –º–æ–ª—á–∏—Ç

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–ì–æ–Ω–∫–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 6 ‚Äî –ú—É–ª—å—Ç–∏—á–∞—Ç
–¶–µ–ª—å

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Ç–∞—Ö.

–ß—Ç–æ –¥–µ–ª–∞–µ–º

–•—Ä–∞–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ chat_id

–í –∫–∞–∂–¥–æ–º —á–∞—Ç–µ —Å–≤–æ—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª—è–µ–º –±–æ—Ç–∞ –≤ 2 —á–∞—Ç–∞

–ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é —Ä–∞–±–æ—Ç—É

–ì–æ—Ç–æ–≤–æ, –µ—Å–ª–∏

–ù–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–π

üß™ –ü—Ä–æ –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã (–∫–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É)

–ù–∞ —Å—Ç–∞—Ä—Ç–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã.

–ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–µ–≥–∫–æ:

unit-—Ç–µ—Å—Ç:

—Ä–∞—Å—á—ë—Ç —Ç–µ–∫—É—â–µ–≥–æ –∫—Ä—É–≥–∞

unit-—Ç–µ—Å—Ç:

–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫—Ä—É–≥–∞

unit-—Ç–µ—Å—Ç:

—Ñ–∏–ª—å—Ç—Ä ¬´—É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ¬ª



üß± –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
bot/
 ‚îú‚îÄ main.py
 ‚îú‚îÄ config.py
 ‚îú‚îÄ race_clock.py
 ‚îú‚îÄ api_client.py
 ‚îú‚îÄ leaderboard.py
 ‚îú‚îÄ state.py
 ‚îî‚îÄ logger.py